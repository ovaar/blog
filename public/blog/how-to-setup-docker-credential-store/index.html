<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Ovaar"><meta name=description content="Software Engineering blog"><title>How to setup docker credential-store - Ovaar - Software engineering blog</title><link rel=stylesheet href=/css/stylesheet.min.css><link href rel=feed type=application/rss+xml title="Ovaar - Software engineering blog"><script src=/theme-toggle.min.js></script></head><body><header><nav><a href=https://ovaar.github.io/>Ovaar - Software engineering blog</a><ul><li><a href=https://ovaar.github.io/>Home</a></li><li><a href=https://ovaar.github.io/blog/>Blog</a></li><li><a href=/tags>Tags</a></li><li><button id=theme-toggle class=theme-toggle aria-label="Toggle theme mode">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
<svg class="dark-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></button></li></ul></nav><h1>How to setup docker credential-store</h1><p><small>published on Tue, 28 Jul 2020</small></p></header><hr><main><div class=tags><a href=/tags/devops class=tag>#devops</a>
<a href=/tags/docker class=tag>#docker</a></div><article class=content><p>Since docker version 19 it start notifying the user that the docker credentials are stored unencrypted.</p><pre tabindex=0><code>WARNING! Your password will be stored unencrypted â€¦
</code></pre><p>To solve this we will use the Docker <a href=https://docs.docker.com/engine/reference/commandline/login/#credentials-store>credential-store</a> feature.</p><ul><li>Ubuntu: <a href=https://github.com/docker/docker-credential-helpers/releases/latest>docker-credential-pass</a></li><li>OSX: osxkeychain</li><li>Windows: wincred</li></ul><p>In this blog post we are going to use install the latest docker-credential-pass helper in combination with pass as a store and gpg for key generation.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt-get install -y pass gpg
</span></span><span class=line><span class=cl>gpg2 --gen-key
</span></span><span class=line><span class=cl><span class=c1># copy gpg-key</span>
</span></span><span class=line><span class=cl>pass init <span class=s2>&#34;&lt;gpg-pub-key&gt;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -i <span class=s1>&#39;0,/{/s/{/{\n\t&#34;credsStore&#34;: &#34;pass&#34;,/&#39;</span> ~/.docker/config.json
</span></span></code></pre></div><p>The following one-line will download the latest <code>docker-credential-pass</code> helper from github and extract it to the <code>~/bin</code> directory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>curl -fsSLI -o /dev/null -w %<span class=o>{</span>url_effective<span class=o>}</span> https://api.github.com/repos/docker/docker-credential-helpers/releases/latest <span class=p>|</span> xargs curl -s <span class=p>|</span> grep -o <span class=s2>&#34;https.*docker-credential-pass.*tar.gz&#34;</span> <span class=p>|</span> wget -qi - <span class=o>&amp;&amp;</span> mkdir -p ~/bin <span class=o>&amp;&amp;</span> tar -xvf docker-credential-pass-v*-amd64.tar.gz -C ~/bin
</span></span></code></pre></div><p>Finally, login with your docker credentials.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>docker login
</span></span></code></pre></div></article></main><footer><footer><hr><div class=footer-content><div class=footer-info><p><small>Copyright &#169; 2020 Ovaar. This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</small></p><p><small>created with <a href=https://gohugo.io>Hugo</a>,
<a href=https://github.com/andybrewer/mvp>mvp.css</a>.</small></p></div><div class=footer-social><div class=social><a href=https://github.com/ovaar target=_blank rel="noopener noreferrer" aria-label="github profile"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://www.linkedin.com/in/thomas-reynders-6bb57057/ target=_blank rel="noopener noreferrer" aria-label="linkedin profile"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div></div></div></footer></footer></body></html>